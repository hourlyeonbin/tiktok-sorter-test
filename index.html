<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Bias Sorter</title>

<!-- âœ… IMPORTANT FOR MOBILE -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    padding: 10px;
    font-family: 'Times New Roman', serif;
    text-align: center;
}

#mainTable {
    width: 100%;
    max-width: 450px;
    margin: 0 auto;
    border-collapse: separate;
    border-spacing: 12px;
}

#leftField, #rightField {
    border: 1px solid #000;
    cursor: pointer;
    width: 180px;
    height: 180px;
}

#leftField img, #rightField img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.middleField {
    border: 1px solid #000;
    cursor: pointer;
    height: 70px;
    font-size: 16px;
}

/* ðŸ“± MOBILE FIX */
@media (max-width: 600px) {

    #leftField, #rightField {
        width: 45vw;
        height: 45vw;
    }

    .middleField {
        width: 90%;
        font-size: 18px;
    }

    #mainTable {
        border-spacing: 10px;
    }
}
</style>

<script>
var namMember = [
    '<img src="tiktok/tiktok1.jpeg">',
    '<img src="tiktok/tiktok2.jpeg">',
    '<img src="tiktok/tiktok3.jpeg">',
    '<img src="tiktok/tiktok4.jpeg">',
    '<img src="tiktok/tiktok5.jpeg">',
    '<img src="tiktok/tiktok6.jpeg">',
    '<img src="tiktok/tiktok7.jpeg">',
    '<img src="tiktok/tiktok8.jpeg">',
    '<img src="tiktok/tiktok9.jpeg">',
    '<img src="tiktok/tiktok10.jpeg">',
    '<img src="tiktok/tiktok11.jpeg">',
    '<img src="tiktok/tiktok12.jpeg">',
    '<img src="tiktok/tiktok13.jpeg">'
];

var lstMember = [];
var parent = [];
var equal = [];
var rec = [];
var cmp1, cmp2;
var head1, head2;
var nrec;
var numQuestion;
var totalSize;
var finishSize;
var finishFlag;

function initList(){
    var n = namMember.length;
    lstMember[n] = [];
    for (var i = 0; i < n; i++) lstMember[n][i] = i;
    parent[n] = -1;
    totalSize = 0;
    for (var i = n; i > 1; i = Math.floor((i+1)/2)) {
        lstMember[Math.floor((i-1)/2)] = [];
        parent[Math.floor((i-1)/2)] = i;
        for (var j = 0; j < Math.floor(i/2); j++) {
            lstMember[Math.floor((i-1)/2)][j] = lstMember[i][j];
        }
        totalSize += Math.floor(i/2);
    }
    rec = [];
    nrec = 0;
    cmp1 = lstMember.length - 1;
    cmp2 = lstMember.length - 2;
    head1 = 0;
    head2 = 0;
    numQuestion = 1;
    finishSize = 0;
    finishFlag = 0;
}

function sortList(flag){
    if (flag < 0) {
        rec[nrec++] = lstMember[cmp1][head1++];
    } else if (flag > 0) {
        rec[nrec++] = lstMember[cmp2][head2++];
    } else {
        rec[nrec++] = lstMember[cmp1][head1++];
        equal[rec[nrec-1]] = lstMember[cmp2][head2++];
    }

    if (head1 < lstMember[cmp1].length && head2 == lstMember[cmp2].length) {
        while (head1 < lstMember[cmp1].length) rec[nrec++] = lstMember[cmp1][head1++];
    } else if (head1 == lstMember[cmp1].length && head2 < lstMember[cmp2].length) {
        while (head2 < lstMember[cmp2].length) rec[nrec++] = lstMember[cmp2][head2++];
    }

    if (head1 == lstMember[cmp1].length && head2 == lstMember[cmp2].length) {
        lstMember[parent[cmp1]] = rec.slice();
        rec = [];
        nrec = 0;
        cmp1 = parent[cmp1];
        cmp2 = cmp1 - 1;
        head1 = 0;
        head2 = 0;
        finishSize += lstMember[cmp1].length;
        if (cmp1 < 0) finishFlag = 1;
    }
    showImage();
}

function showImage(){
    if (finishFlag) {
        var result = "<h2>Result</h2>";
        for (var i = 0; i < lstMember[0].length; i++) {
            result += "<div>" + namMember[lstMember[0][i]] + "</div><br>";
        }
        document.getElementById("resultField").innerHTML = result;
    } else {
        document.getElementById("leftField").innerHTML = namMember[lstMember[cmp1][head1]];
        document.getElementById("rightField").innerHTML = namMember[lstMember[cmp2][head2]];
        document.getElementById("progress").innerHTML =
            "Battle " + numQuestion++ + " of " + totalSize;
    }
}

window.onload = function(){
    initList();
    showImage();
};
</script>
</head>

<body>

<h2>Bias Sorter</h2>
<div id="progress"></div>

<table id="mainTable">
<tr>
<td id="leftField" onclick="sortList(-1)"></td>
<td id="rightField" onclick="sortList(1)"></td>
</tr>
<tr>
<td class="middleField" colspan="2" onclick="sortList(0)">
Tie
</td>
</tr>
</table>

<div id="resultField"></div>

</body>
</html>
